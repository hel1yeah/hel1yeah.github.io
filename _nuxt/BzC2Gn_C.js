import{_ as H}from"./D7uz-sJn.js";import{W as G,X as M,Y as f,Z as D,_ as k,$ as X,a0 as V,a1 as $,a2 as Y,a3 as Z,a4 as q,a5 as B,a6 as J,a7 as tt,a8 as et,a9 as st,k as it,aa as rt,ab as at,ac as nt,i as T,ad as W,ae as ot,af as N,ag as ht,ah as ct,ai as lt,aj as ut,e as dt,c as y,o as g,a as U,ak as F,t as m,q as C,F as ft,s as pt,b as bt}from"./FuMbziic.js";import{_ as vt}from"./DlAUqK2U.js";var mt=class extends G{constructor(t,e){super(),this.options=e,this.#s=t,this.#r=null,this.#i=M(),this.options.experimental_prefetchInRender||this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#s;#t=void 0;#p=void 0;#e=void 0;#n;#l;#i;#r;#b;#u;#d;#o;#h;#a;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),z(this.#t,this.options)?this.#c():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return x(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return x(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#R(),this.#_(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,s=this.#t;if(this.options=this.#s.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof f(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!D(this.options,e)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&K(this.#t,s,this.options,e)&&this.#c(),this.updateResult(),r&&(this.#t!==s||f(this.options.enabled,this.#t)!==f(e.enabled,this.#t)||k(this.options.staleTime,this.#t)!==k(e.staleTime,this.#t))&&this.#v();const i=this.#m();r&&(this.#t!==s||f(this.options.enabled,this.#t)!==f(e.enabled,this.#t)||i!==this.#a)&&this.#y(i)}getOptimisticResult(t){const e=this.#s.getQueryCache().build(this.#s,t),s=this.createResult(e,t);return gt(this,s)&&(this.#e=s,this.#l=this.options,this.#n=this.#t.state),s}getCurrentResult(){return this.#e}trackResult(t,e){return new Proxy(t,{get:(s,r)=>(this.trackProp(r),e?.(r),Reflect.get(s,r))})}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#s.defaultQueryOptions(t),s=this.#s.getQueryCache().build(this.#s,e);return s.fetch().then(()=>this.createResult(s,e))}fetch(t){return this.#c({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#e))}#c(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(X)),e}#v(){this.#R();const t=k(this.options.staleTime,this.#t);if(V||this.#e.isStale||!$(t))return;const s=Y(this.#e.dataUpdatedAt,t)+1;this.#o=setTimeout(()=>{this.#e.isStale||this.updateResult()},s)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#_(),this.#a=t,!(V||f(this.options.enabled,this.#t)===!1||!$(this.#a)||this.#a===0)&&(this.#h=setInterval(()=>{(this.options.refetchIntervalInBackground||Z.isFocused())&&this.#c()},this.#a))}#g(){this.#v(),this.#y(this.#m())}#R(){this.#o&&(clearTimeout(this.#o),this.#o=void 0)}#_(){this.#h&&(clearInterval(this.#h),this.#h=void 0)}createResult(t,e){const s=this.#t,r=this.options,i=this.#e,h=this.#n,c=this.#l,v=t!==s?t.state:this.#p,{state:S}=t;let o={...S},I=!1,n;if(e._optimisticResults){const u=this.hasListeners(),Q=!u&&z(t,e),w=u&&K(t,s,e,r);(Q||w)&&(o={...o,...q(S.data,t.options)}),e._optimisticResults==="isRestoring"&&(o.fetchStatus="idle")}let{error:a,errorUpdatedAt:b,status:d}=o;n=o.data;let O=!1;if(e.placeholderData!==void 0&&n===void 0&&d==="pending"){let u;i?.isPlaceholderData&&e.placeholderData===c?.placeholderData?(u=i.data,O=!0):u=typeof e.placeholderData=="function"?e.placeholderData(this.#d?.state.data,this.#d):e.placeholderData,u!==void 0&&(d="success",n=B(i?.data,u,e),I=!0)}if(e.select&&n!==void 0&&!O)if(i&&n===h?.data&&e.select===this.#b)n=this.#u;else try{this.#b=e.select,n=e.select(n),n=B(i?.data,n,e),this.#u=n,this.#r=null}catch(u){this.#r=u}this.#r&&(a=this.#r,n=this.#u,b=Date.now(),d="error");const R=o.fetchStatus==="fetching",_=d==="pending",P=d==="error",j=_&&R,A=n!==void 0,p={status:d,fetchStatus:o.fetchStatus,isPending:_,isSuccess:d==="success",isError:P,isInitialLoading:j,isLoading:j,data:n,dataUpdatedAt:o.dataUpdatedAt,error:a,errorUpdatedAt:b,failureCount:o.fetchFailureCount,failureReason:o.fetchFailureReason,errorUpdateCount:o.errorUpdateCount,isFetched:o.dataUpdateCount>0||o.errorUpdateCount>0,isFetchedAfterMount:o.dataUpdateCount>v.dataUpdateCount||o.errorUpdateCount>v.errorUpdateCount,isFetching:R,isRefetching:R&&!_,isLoadingError:P&&!A,isPaused:o.fetchStatus==="paused",isPlaceholderData:I,isRefetchError:P&&A,isStale:L(t,e),refetch:this.refetch,promise:this.#i,isEnabled:f(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const u=E=>{p.status==="error"?E.reject(p.error):p.data!==void 0&&E.resolve(p.data)},Q=()=>{const E=this.#i=p.promise=M();u(E)},w=this.#i;switch(w.status){case"pending":t.queryHash===s.queryHash&&u(w);break;case"fulfilled":(p.status==="error"||p.data!==w.value)&&Q();break;case"rejected":(p.status!=="error"||p.error!==w.reason)&&Q();break}}return p}updateResult(){const t=this.#e,e=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#l=this.options,this.#n.data!==void 0&&(this.#d=this.#t),D(e,t))return;this.#e=e;const s=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#f.size)return!0;const h=new Set(i??this.#f);return this.options.throwOnError&&h.add("error"),Object.keys(this.#e).some(c=>{const l=c;return this.#e[l]!==t[l]&&h.has(l)})};this.#O({listeners:s()})}#w(){const t=this.#s.getQueryCache().build(this.#s,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#p=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#O(t){J.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#e)}),this.#s.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function yt(t,e){return f(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function z(t,e){return yt(t,e)||t.state.data!==void 0&&x(t,e,e.refetchOnMount)}function x(t,e,s){if(f(e.enabled,t)!==!1&&k(e.staleTime,t)!=="static"){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&L(t,e)}return!1}function K(t,e,s,r){return(t!==e||f(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&L(t,s)}function L(t,e){return f(e.enabled,t)!==!1&&t.isStaleByTime(k(e.staleTime,t))}function gt(t,e){return!D(t.getCurrentResult(),e)}function Rt(t=""){if(!tt())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const e=st(t),s=et(e);if(!s)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return s}function _t(t,e,s){const r=Rt(),i=it(()=>{const a=rt(e);typeof a.enabled=="function"&&(a.enabled=a.enabled());const b=r.defaultQueryOptions(a);return b._optimisticResults=r.isRestoring?.value?"isRestoring":"optimistic",b}),h=new t(r,i.value),c=i.value.shallow?at(h.getCurrentResult()):nt(h.getCurrentResult());let l=()=>{};r.isRestoring&&T(r.isRestoring,a=>{a||(l(),l=h.subscribe(b=>{W(c,b)}))},{immediate:!0});const v=()=>{h.setOptions(i.value),W(c,h.getCurrentResult())};T(i,v),ot(()=>{l()});const S=(...a)=>(v(),c.refetch(...a)),o=()=>new Promise((a,b)=>{let d=()=>{};const O=()=>{if(i.value.enabled!==!1){h.setOptions(i.value);const R=h.getOptimisticResult(i.value);R.isStale?(d(),h.fetchOptimistic(i.value).then(a,_=>{N(i.value.throwOnError,[_,h.getCurrentQuery()])?b(_):a(h.getCurrentResult())})):(d(),a(R))}};O(),d=T(i,O)});T(()=>c.error,a=>{if(c.isError&&!c.isFetching&&N(i.value.throwOnError,[a,h.getCurrentQuery()]))throw a});const I=i.value.shallow?ht(c):ct(c),n=lt(I);for(const a in c)typeof c[a]=="function"&&(n[a]=c[a]);return n.suspense=o,n.refetch=S,n}function wt(t,e){return _t(mt,t)}const Ot=()=>{const e=ut().public.firebaseUrl;return wt({queryKey:["works"],queryFn:async()=>{try{if(!e)throw new Error("Firebase URL is not configured");const s=await $fetch(e);return s?Object.values(s):[]}catch(s){throw console.error("Error fetching works data:",s),s}},staleTime:5e3})},Ct={class:"works"},kt={class:"works__title"},St={key:0,class:"works__loader"},It={key:1,class:"works__error"},Qt={key:2,class:"works__grid"},Et={class:"work-card__content"},Tt={class:"work-card__title"},Ut={class:"work-card__description"},Ft=["href","aria-label"],Pt=dt({__name:"AppWorks",props:{page:{type:Boolean,default:!1}},setup(t){const{data:e,isLoading:s,error:r}=Ot();return(i,h)=>{const c=H;return g(),y("section",Ct,[U("h2",kt,m(i.$t("works.title")),1),C(s)?(g(),y("div",St,m(i.$t("works.loading")),1)):F("",!0),C(r)?(g(),y("div",It,m(i.$t("works.error"))+" "+m(C(r).message),1)):F("",!0),C(e)?(g(),y("div",Qt,[(g(!0),y(ft,null,pt(C(e),(l,v)=>(g(),y("div",{key:v,class:"work-card"},[bt(c,{src:l.demo,alt:l.name,class:"work-card__image",width:"400",height:"300",loading:"lazy",placeholder:[50,25,75,5],format:"webp",quality:"85"},null,8,["src","alt"]),U("div",Et,[U("h3",Tt,m(l.name),1),U("p",Ut,m(l.descr),1),l.link!=null?(g(),y("a",{key:0,class:"btn work-card__link",href:l.link,"aria-label":`Visit ${l.name} project website`,target:"_blank",rel:"noopener noreferrer"},m(i.$t("works.sitePrefix"))+" "+m(l.name),9,Ft)):F("",!0)])]))),128))])):F("",!0)])}}}),At=vt(Pt,[["__scopeId","data-v-8ec10542"]]);export{At as A};
